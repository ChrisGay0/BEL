<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE beans PUBLIC "-//SPRING//DTD BEAN//EN" "http://www.springframework.org/dtd/spring-beans.dtd">
<beans>
	
	<bean id="RegisterController" class="com.cgsolutions.report.RegisterController">
		<property name="methodNameResolver">
			<ref local="resolver"/>
		</property>	
		<property name="roomManager" ref="roomManager"/>
		<property name="attendanceManager" ref="attendanceManager"/>
	</bean>
	
	<bean id="RegisterCompile" class="org.springframework.web.servlet.view.jasperreports.JasperReportsPdfView">
		<property name="reportDataKey">
			<value>dataSource</value>
		</property>
		<property name="url">
			<value>/WEB-INF/reports/register.jasper</value>
		</property>
		<property name="subReportUrls">
			<map>					
				<entry key="registerSubReport">
					<value>/WEB-INF/reports/registerSubReport.jasper</value>
				</entry>
			</map>
		</property>
	</bean>
	
	<bean id="FullChildListCompile" class="org.springframework.web.servlet.view.jasperreports.JasperReportsXlsView">
		<property name="reportDataKey">
			<value>dataSource</value>
		</property>
		<property name="url">
			<value>/WEB-INF/reports/FullChildList.jasper</value>
		</property>
		<property name="subReportUrls">
			<map>					
				<entry key="FullChildListSubReport">
					<value>/WEB-INF/reports/FullChildListSubReport.jasper</value>
				</entry>
			</map>
		</property>
	</bean>
	
	<bean id="ShortChildListCompile" class="org.springframework.web.servlet.view.jasperreports.JasperReportsXlsView">
		<property name="reportDataKey">
			<value>dataSource</value>
		</property>
		<property name="url">
			<value>/WEB-INF/reports/ShortChildList.jasper</value>
		</property>
		<property name="subReportUrls">
			<map>					
				<entry key="ShortChildListSubReport">
					<value>/WEB-INF/reports/ShortChildListSubReport.jasper</value>
				</entry>
			</map>
		</property>
	</bean>
	
	<bean id="LunchRegisterController" class="com.cgsolutions.report.LunchRegisterController">
		<property name="methodNameResolver">
			<ref local="resolver"/>
		</property>	
		<property name="attendanceManager" ref="attendanceManager"/>
	</bean>
	
	<bean id="LunchRegisterCompile" class="org.springframework.web.servlet.view.jasperreports.JasperReportsPdfView">
		<property name="reportDataKey">
			<value>dataSource</value>
		</property>
		<property name="url">
			<value>/WEB-INF/reports/lunchRegister.jasper</value>
		</property>
		<property name="subReportUrls">
			<map>					
				<entry key="lunchRegisterSubReport">
					<value>/WEB-INF/reports/lunchRegisterSubReport.jasper</value>
				</entry>
			</map>
		</property>
	</bean>
	
	<bean id="PaymentController" class="com.cgsolutions.report.PaymentController">
		<property name="methodNameResolver">
			<ref local="resolver"/>
		</property>	
		<property name="paymentManager" ref="paymentManager"/>
	</bean>
	
	<bean id="PaymentCompile" class="org.springframework.web.servlet.view.jasperreports.JasperReportsPdfView">
		<property name="reportDataKey">
			<value>dataSource</value>
		</property>
		<property name="url">
			<value>/WEB-INF/reports/payments.jasper</value>
		</property>
	</bean>
	
	<bean id="InvoiceController" class="com.cgsolutions.report.InvoiceController">
		<property name="methodNameResolver">
			<ref local="resolver"/>
		</property>	
		<property name="termManager" ref="termManager"/>
		<property name="schoolManager" ref="schoolManager"/>
		<property name="attendanceManager" ref="attendanceManager"/>
		<property name="billManager" ref="billManager"/>
		<property name="childManager" ref="childManager"/>
	</bean>
	
	<bean id="InvoiceCompile" class="org.springframework.web.servlet.view.jasperreports.JasperReportsPdfView">
		<property name="reportDataKey">
			<value>dataSource</value>
		</property>
		<property name="url">
			<value>/WEB-INF/reports/Invoice.jasper</value>
		</property>
	</bean>
	
	<bean id="WaitingListController" class="com.cgsolutions.report.WaitingListController">
		<property name="methodNameResolver">
			<ref local="resolver"/>
		</property>	
		<property name="roomManager" ref="roomManager"/>
		<property name="childManager" ref="childManager"/>
		<property name="termManager" ref="termManager"/>
	</bean>
	
	<bean id="WaitingListCompile" class="org.springframework.web.servlet.view.jasperreports.JasperReportsPdfView">
		<property name="reportDataKey">
			<value>dataSource</value>
		</property>
		<property name="url">
			<value>/WEB-INF/reports/WaitingList.jasper</value>
		</property>
	</bean>
	
	<bean id="ChildListController" class="com.cgsolutions.report.ChildListController">
		<property name="methodNameResolver">
			<ref local="resolver"/>
		</property>	
		<property name="roomManager" ref="roomManager"/>
		<property name="childManager" ref="childManager"/>
	</bean>
	
	<bean id="ChildListCompile" class="org.springframework.web.servlet.view.jasperreports.JasperReportsPdfView">
		<property name="reportDataKey">
			<value>dataSource</value>
		</property>
		<property name="url">
			<value>/WEB-INF/reports/ChildList.jasper</value>
		</property>
		<property name="subReportUrls">
			<map>					
				<entry key="childListSubReport">
					<value>/WEB-INF/reports/ChildListSubReport.jasper</value>
				</entry>
			</map>
		</property>
	</bean>
	
	<bean id="WelcomeLetterController" class="com.cgsolutions.report.WelcomeLetterController">
		<property name="methodNameResolver">
			<ref local="resolver"/>
		</property>	
		<property name="childManager" ref="childManager"/>
		<property name="schoolManager" ref="schoolManager"/>
	</bean>
	
	<bean id="WelcomeLetterCompile" class="org.springframework.web.servlet.view.jasperreports.JasperReportsPdfView">
		<property name="reportDataKey">
			<value>dataSource</value>
		</property>
		<property name="url">
			<value>/WEB-INF/reports/WelcomeLetter.jasper</value>
		</property>
	</bean>

<!-- 
<property name="subReportUrls">
			<map>					
				<entry key="documentSubReport">
					<value>/WEB-INF/reports/DocumentInvoiceWorkcards.jasper</value>
				</entry>
				<entry key="tradeEstimatesSubReport">
					<value>/WEB-INF/reports/DocumentInvoiceLabour.jasper</value>
				</entry>
				<entry key="materialEstimatesSubReport">
					<value>/WEB-INF/reports/DocumentInvoiceMaterials.jasper</value>
				</entry>
				<entry key="sundryEstimatesSubReport">
					<value>/WEB-INF/reports/DocumentInvoiceSundries.jasper</value>
				</entry>
			</map>
		</property>
 -->	
	<bean id="urlMapping" class="org.springframework.web.servlet.handler.SimpleUrlHandlerMapping">
		<property name="mappings">
			<props>
				<prop key="/register.pdf">RegisterController</prop>
				<prop key="/lunchRegister.pdf">LunchRegisterController</prop>
				<prop key="/invoice.pdf">InvoiceController</prop>
				<prop key="/welcomeLetter.pdf">WelcomeLetterController</prop>
				<prop key="/waitingList.pdf">WaitingListController</prop>
				<prop key="/childList.pdf">ChildListController</prop>
				<prop key="/fullChildList.xls">ChildListController</prop>
				<prop key="/shortChildList.xls">ChildListController</prop>
				<prop key="/payments.pdf">PaymentController</prop>
			</props>
		</property>
	</bean>	
	
	<bean id="resolver" class="org.springframework.web.servlet.mvc.multiaction.PropertiesMethodNameResolver">
		<property name="mappings">
			<props>
				<prop key="/register.pdf">printRegister</prop>
				<prop key="/lunchRegister.pdf">printLunchRegister</prop>
				<prop key="/invoice.pdf">printInvoice</prop>
				<prop key="/welcomeLetter.pdf">printLetter</prop>
				<prop key="/waitingList.pdf">handleReport</prop>
				<prop key="/childList.pdf">handleReport</prop>
				<prop key="/fullChildList.xls">handleFullReport</prop>
				<prop key="/shortChildList.xls">handleShortReport</prop>
				<prop key="/payments.pdf">printReport</prop>
			</props>
		</property>
	</bean>	
	
	<bean id="nameViewResolver" class="org.springframework.web.servlet.view.BeanNameViewResolver"/>
</beans>